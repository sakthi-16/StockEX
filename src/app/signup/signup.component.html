<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />

<div class="container mt-5">
  <form [formGroup]="signupForm" (ngSubmit)="onSubmit()" class="signup-box p-4 shadow rounded bg-light">
    <div class="text-center mb-4">
      <img alt="logo" height="120" width="150" src="assets/images/logoStockEX.jpg" />
    </div>

    <div class="mb-3">
      <label for="username">Name:</label>
      <input type="text" id="username" class="form-control" formControlName="username" placeholder="Enter your name" />
      <div *ngIf="signupForm.get('username')?.touched && signupForm.get('username')?.invalid" class="text-danger">
        Name is required.
      </div>
    </div>

    <div class="row">
      <div class="col-md-6 mb-3">
        <label for="email">Email:</label>
        <input type="email" id="email" class="form-control" formControlName="email" placeholder="Enter valid email" />
        <div *ngIf="signupForm.get('email')?.touched && signupForm.get('email')?.invalid" class="text-danger">
          <div *ngIf="signupForm.get('email')?.errors?.['required']">Email is required.</div>
          <div *ngIf="signupForm.get('email')?.errors?.['email']">Enter a valid email.</div>
        </div>
      </div>
      <div class="col-md-6 mb-3">
        <label for="pan">PAN:</label>
        <input type="text" id="pan" class="form-control" formControlName="pan" placeholder="Enter PAN Number" />
        <div *ngIf="signupForm.get('pan')?.touched && signupForm.get('pan')?.invalid" class="text-danger">
          PAN is required.
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col-md-6 mb-3">
        <label for="mobile">Mobile Number:</label>
        <input type="text" id="mobile" class="form-control" formControlName="mobile" placeholder="Phone number" />
        <div *ngIf="signupForm.get('mobile')?.touched && signupForm.get('mobile')?.invalid" class="text-danger">
          <div *ngIf="signupForm.get('mobile')?.errors?.['required']">Mobile number is required.</div>
          <div *ngIf="signupForm.get('mobile')?.errors?.['pattern']">Enter a valid 10-digit mobile number.</div>
        </div>
      </div>
      <div class="col-md-6 mb-3">
        <label for="dob">DOB:</label>
        <input type="date" id="dob" class="form-control" formControlName="dob" />
        <div *ngIf="signupForm.get('dob')?.touched && signupForm.get('dob')?.invalid" class="text-danger">
          <div *ngIf="signupForm.get('dob')?.errors?.['required']">Date of Birth is required.</div>
          <div *ngIf="signupForm.get('dob')?.errors?.['futureDate']">Date cannot be in the future.</div>
        </div>
      </div>
    </div>

    <div class="mb-3">
      <label for="password">Password:</label>
      <input type="password" id="password" class="form-control" formControlName="password" placeholder="*********" />
      <div *ngIf="signupForm.get('password')?.touched && signupForm.get('password')?.invalid" class="text-danger">
        <div *ngIf="signupForm.get('password')?.errors?.['required']">Password is required.</div>
        <div *ngIf="signupForm.get('password')?.errors?.['pattern']">
          Password must be at least 8 characters, include uppercase, lowercase, number, and special character.
        </div>
      </div>
    </div>

    <div class="mb-3">
      <label for="confirmPassword">Confirm Password:</label>
      <input type="password" id="confirmPassword" class="form-control" formControlName="confirmPassword" placeholder="Re-type your password" />
      <div *ngIf="signupForm.get('confirmPassword')?.touched && signupForm.get('confirmPassword')?.invalid" class="text-danger">
        <div *ngIf="signupForm.get('confirmPassword')?.errors?.['required']">Confirm Password is required.</div>
        <div *ngIf="signupForm.errors?.['passwordMismatch']">Passwords do not match.</div>
      </div>
    </div>

    <!-- Global error -->
    <div *ngIf="errorMessage" class="alert alert-danger text-center">
      {{ errorMessage }}
    </div>

    <!-- Global success -->
    <div *ngIf="successMessage" class="alert alert-success text-center">
      {{ successMessage }}
    </div>

    <div class="text-center">
      <button type="submit" class="btn text-white" style="background-color: #065aa9;">Signup</button>
    </div>

    <div class="text-center mt-3">
      <a href="/app-login">Already have an account? Login</a>
    </div>
  </form>
</div>
